# Tests

The archetype is prepared for both unit and integration tests. These two kinds of tests will be handled separatedly, not only they will be in different packages, but also will be handled through two different plugins, and have two different sets of reports.

Surefire will be used to run unit tests, while Failsafe will take care of integration ones. Both kind of test follow a series of recommended practices, which are detailed on their sections, but are very similar.

First, both make use of suite files, which will be run by the tests plugins. These are required, and if the tests class path is changed, the files should be updated.

Additionally, there are two different naming schemes recommended to distinguish unit and integration tests. And both kinds are run by different commands.

## Tests framework

TestNG is meant to be used as the tests framework, and is included on the 'test' scope.

The most noticeable difference with other testing frameworks is the usage of test groups, which in the case of this archetype can be mostly seen on the test/resources folder, where the 'tests\_maven\_unit\_suite.xml' will run all the unit tests, and the 'tests\_maven\_integration\_suite.xml' will run all the integration tests.

Of course, both of these files should be correctly configured for this to work. And as the test plugins will make use of both of these files this is a must. If the test files class path is changed, these two files should be updated to reflect this.

## Tests structure

It is recommended to store unit and integration tests separately. The archetype already does this, giving a tests classpath where the 'unit' and an 'integration' packages will store the tests of the type they share the name with.

Additionally, to better differentiate them, unit tests are expected to start with the 'Test' keyword, and the integration ones with the 'IT' keyword.

Note that the classpath offered for the tests has 'testing.test' as part of it. The reason is that if additional classes are required for the tests a 'testing.framework', or similar, package can be added, separating the actual tests from the support classes.

## Reports

Reports are generated on the Maven file for both unit and integration tests.

For this the Surefire report plugin, for unit tests, and the Failsafe report plugin, for integration tests, are used.

Additionally, a coverage report is generated by using JaCoCo.

## Logging

TestNG makes use of Log4J for logging, and this is included as a dependency with the 'test' scope.

The configuration file, named 'log4j.xml', can be found on the tests resources folder.

## Summing it up

### Unit tests

Units test are run by the **tests\_maven\_unit\_suite.xml** test suite, and should start with the 'Test' prefix.

They can be run using the command:

```none
mvn test
```

### Integration tests

Units test are run by the **tests\_maven\_integration\_suite.xml** test suite, and should start with the 'IT' prefix.

They can be run using the command:

```none
mvn verify
```

This command won't just run the integration tests, *it will run first the unit tests, and then the integration tests*.